{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let PatientComponent = class PatientComponent {\n  constructor(doctorService, p) {\n    this.doctorService = doctorService;\n    this.doctors = [];\n    this.appointments = [];\n    this.newAppointment = {\n      date: '',\n      time: ''\n    };\n    this.availableSlots = [];\n    this.editedAppointment = null;\n    this.selectedSlot = null;\n    this.selectedPatientId = null;\n    this.loadDoctors();\n  }\n  selectSlot(slot) {\n    this.selectedSlot = slot;\n  }\n  selectPatient(patientId) {\n    this.selectedPatientId = patientId;\n  }\n  loadDoctors() {\n    this.doctorService.getDoctors().subscribe(doctors => {\n      this.doctors = doctors;\n      console.log('Doctors:', this.doctors);\n    });\n  }\n  loadDoctorSlots() {\n    console.log(this.selectedDoctor);\n    if (this.selectedDoctor) {\n      this.doctorService.getDoctorSlots(this.selectedDoctor._id).subscribe(slots => {\n        this.availableSlots = slots;\n      });\n    }\n  }\n  cancelAppointment(appointment) {\n    const index = this.appointments.indexOf(appointment);\n    if (index !== -1) {\n      this.appointments.splice(index, 1);\n    }\n  }\n  editAppointment(appointment) {\n    this.editedAppointment = {\n      ...appointment\n    };\n    this.editedAppointment.time = this.formatTime(this.editedAppointment.time);\n  }\n  saveEditedAppointment() {\n    if (this.editedAppointment) {\n      this.editedAppointment.time = this.parseTimeString(this.editedAppointment.time);\n      const index = this.appointments.findIndex(appointment => appointment.id === this.editedAppointment.id);\n      if (index !== -1) {\n        this.appointments[index] = {\n          ...this.editedAppointment\n        };\n        this.editedAppointment = null;\n      }\n    }\n  }\n  formatTime(time) {\n    const options = {\n      hour: 'numeric',\n      minute: 'numeric',\n      hour12: true\n    };\n    return new Intl.DateTimeFormat('en-US', options).format(time);\n  }\n  parseTimeString(timeString) {\n    const [hoursStr, minutesStr] = timeString.split(':');\n    const hours = parseInt(hoursStr, 10);\n    const minutes = parseInt(minutesStr, 10);\n    if (isNaN(hours) || isNaN(minutes)) {\n      console.error('Invalid time format. Please enter a valid time.');\n      return null;\n    }\n    const date = new Date();\n    date.setHours(hours, minutes, 0, 0);\n    return date;\n  }\n  reserveAppointment() {\n    if (this.selectedSlot && this.selectedPatientId) {\n      this.patientService.reserveSlot(this.selectedSlot._id, this.selectedPatientId).subscribe(response => {\n        console.log('Slot reserved successfully:', response);\n        // You may want to update your UI or perform other actions upon successful reservation.\n      }, error => {\n        console.error('Error reserving slot:', error);\n        // Handle errors gracefully, e.g., show an error message to the user.\n      });\n    } else {\n      console.error('Selected slot or patient ID is missing.');\n      // Handle the case where the required information is missing.\n    }\n  }\n};\n\nPatientComponent = __decorate([Component({\n  selector: 'app-patient',\n  templateUrl: './patient.component.html',\n  styleUrls: ['./patient.component.css']\n})], PatientComponent);","map":{"version":3,"names":["Component","PatientComponent","constructor","doctorService","p","doctors","appointments","newAppointment","date","time","availableSlots","editedAppointment","selectedSlot","selectedPatientId","loadDoctors","selectSlot","slot","selectPatient","patientId","getDoctors","subscribe","console","log","loadDoctorSlots","selectedDoctor","getDoctorSlots","_id","slots","cancelAppointment","appointment","index","indexOf","splice","editAppointment","formatTime","saveEditedAppointment","parseTimeString","findIndex","id","options","hour","minute","hour12","Intl","DateTimeFormat","format","timeString","hoursStr","minutesStr","split","hours","parseInt","minutes","isNaN","error","Date","setHours","reserveAppointment","patientService","reserveSlot","response","__decorate","selector","templateUrl","styleUrls"],"sources":["D:\\Year4\\Tools 3\\clinic-appointment-app\\src\\app\\patient\\patient.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport { DoctorService } from '../doctor/doctor.service';\nimport { PatientService } from './patient.service';\nimport { ActivatedRoute } from '@angular/router';\n\ninterface Doctor {\n  id: string;\n  name: string;\n}\n\ninterface Slot {\n  time: string;\n  date:string;\n  _id:string;\n}\n@Component({\n  selector: 'app-patient',\n  templateUrl: './patient.component.html',\n  styleUrls: ['./patient.component.css']\n})\nexport class PatientComponent {\n  selectedDoctor: any;\n  doctors: Doctor[] = [];\n  appointments: any[] = [];\n  newAppointment: { date: string, time: string, slot?: Slot } = { date: '', time: ''};\n  availableSlots: Slot[] = [];\n  editedAppointment: any | null = null;\n  selectedSlot: Slot | null = null;\n  selectedPatientId: string | null = null;\n  constructor(private doctorService: DoctorService ,p) {\n    this.loadDoctors();\n  }\n  selectSlot(slot: Slot) {\n    this.selectedSlot = slot;\n  }\n  selectPatient(patientId: string) {\n    this.selectedPatientId = patientId;\n  }\nloadDoctors() {\n    this.doctorService.getDoctors().subscribe((doctors: Doctor[]) => {\n    this.doctors = doctors;\n    console.log('Doctors:', this.doctors); \n  });\n  }\n\nloadDoctorSlots() {\n    console.log(this.selectedDoctor)\n    if (this.selectedDoctor) {\n      this.doctorService.getDoctorSlots(this.selectedDoctor._id).subscribe((slots: Slot[]) => {\n        this.availableSlots = slots;\n      });\n    }\n  }\ncancelAppointment(appointment: any) {\n    const index = this.appointments.indexOf(appointment);\n    if (index !== -1) {\n      this.appointments.splice(index, 1);\n    }\n  }\n\neditAppointment(appointment: any) {\n  this.editedAppointment = { ...appointment };\n  this.editedAppointment.time = this.formatTime(this.editedAppointment.time);\n}\n\nsaveEditedAppointment() {\n  if (this.editedAppointment) {\n    this.editedAppointment.time = this.parseTimeString(this.editedAppointment.time);\n    const index = this.appointments.findIndex(appointment => appointment.id === this.editedAppointment.id);\n    if (index !== -1) {\n      this.appointments[index] = { ...this.editedAppointment };\n      this.editedAppointment = null; \n    }\n  }\n}\n\nformatTime(time: Date): string {\n  const options: Intl.DateTimeFormatOptions = { hour: 'numeric', minute: 'numeric', hour12: true };\n  return new Intl.DateTimeFormat('en-US', options).format(time);\n}\n\nprivate parseTimeString(timeString: string): Date | null {\n  const [hoursStr, minutesStr] = timeString.split(':');\n  const hours = parseInt(hoursStr, 10);\n  const minutes = parseInt(minutesStr, 10);\n\n  if (isNaN(hours) || isNaN(minutes)) {\n    console.error('Invalid time format. Please enter a valid time.');\n    return null;\n  }\n\n  const date = new Date();\n  date.setHours(hours, minutes, 0, 0);\n\n  return date;\n}\n\nreserveAppointment() {\n  if (this.selectedSlot && this.selectedPatientId) {\n    this.patientService.reserveSlot(this.selectedSlot._id, this.selectedPatientId).subscribe(\n      (response) => {\n        console.log('Slot reserved successfully:', response);\n        // You may want to update your UI or perform other actions upon successful reservation.\n      },\n      (error) => {\n        console.error('Error reserving slot:', error);\n        // Handle errors gracefully, e.g., show an error message to the user.\n      }\n    );\n  } else {\n    console.error('Selected slot or patient ID is missing.');\n    // Handle the case where the required information is missing.\n  }\n}  \n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}